{% extends 'base.html.twig' %}

{% block title %}
	Détail de l'utilisateur | Electro-Multifix
{% endblock %}

{% block body %}
	{% include 'admin/_menu.html.twig' %}

	<div
		class="container mt-5">
		<!-- Section Informations de l'utilisateur -->
		<div class="row mb-4">
			<div class="col-12">
				<div class="card shadow-sm">
					<div class="card-header bg-primary text-white">
						<h4>Détails de l'utilisateur</h4>
					</div>
					<div class="card-body">
						<div
							class="row">
							<!-- Informations principales -->
							<div class="col-md-6">
								<p>
									<strong>Nom :</strong>
									{{ user.nom }}</p>
								<p>
									<strong>Email :</strong>
									{{ user.email }}</p>
								<p>
									<strong>Fonction :</strong>
									{% if user.fonction =="ROLE_ADMIN" %}
										ADMINISTRATEUR
									{% elseif user.fonction == "ROLE_EMPLOYER" %}
										EMPLOYER
									{% else %}
										CLIENT
									{% endif %}
								</p>
								<p>
									<strong>Date d'inscription :</strong>
									{{ user.date|date('d/m/Y') }}</p>
							</div>
							<!-- Informations supplémentaires -->
							<div class="col-md-6">
								<p>
									<strong>Téléphone :</strong>
									{{ user.phone }}</p>
								<p>
									<strong>Adresse :</strong>
									{{ user.adresse }}</p>
								<p>
									<strong>Status Email :</strong>
									{% if user.status == 1 %}
										<span class="badge bg-success">Confirmé</span>
									{% else %}
										<span class="badge bg-danger">Non confirmé</span>
									{% endif %}
								</p>
								<p>
									<strong>Status Compte :</strong>
									{% if user.statuscompte == 1 %}
										<span class="badge bg-success">Activé</span>
									{% else %}
										<span class="badge bg-danger">Désactivé</span>
									{% endif %}
								</p>
							</div>
						</div>
						<a href="" class="btn btn-warning mt-3">Modifier le compte</a>
					</div>
				</div>
			</div>
		</div>

		<!-- Section Commandes et Réparations -->
		<div
			class="row">
			<!-- Commandes -->
			<div class="col-md-6 mb-4">
				<div class="card shadow-sm">
					<div class="card-header bg-info text-white">
						<h5>Commandes</h5>
					</div>
					<div class="card-body">

						<hr>
						{% if commandes|length > 0 %}
							<div class="row">

								{% for commande in commandes %}
									<div class="col-md-12 mb-3">
										<div class="card">
											<div class="card-body">
												<p>
													<strong>Commande n° :
														{{ commande.matricule }}</strong>
												</p>
												<p>
													Type de paiment  :
													{{ commande.methodePaiement.type }}
												</p>

												<p>Prix total :
													{{ commande.prixtotal }}
													€</p>
												<p>Date :
													{{ commande.createdAt|date('d/m/Y') }}</p>
											</div>
										</div>
									</div>
								{% endfor %}
							</div>
							{{ knp_pagination_render(commandes) }}
						{% else %}
							<p>Aucune commande effectuée par cet utilisateur.</p>
						{% endif %}
					</div>
				</div>
			</div>

			<!-- Réparations -->
			<div class="col-md-6 mb-4">
				<div class="card shadow-sm">
					<div class="card-header bg-success text-white">
						<h5>Réparations</h5>
					</div>
					<div class="card-body">

						<hr>
						{% if reparations|length > 0 %}
							<div class="row">
								{% for reparation in reparations %}
									<div class="col-md-12 mb-3">
										<div class="card">
											<div class="card-body">
												<p>
													<strong>Réparation n° :
														{{ reparation.matricule }}</strong>
												</p>
												<p>Description :
													{{ reparation.description }}</p>
												<p>Status :
													{% if reparation.statusReparation == "Terminé" %}
														<span class="badge bg-success">Terminé</span>
													{% else %}
														<span class="badge bg-warning">En cours</span>
													{% endif %}
												</p>
												<p>Date prévue :
													{{ reparation.dateRepri|date('d/m/Y') }}</p>
											</div>
										</div>
									</div>
								{% endfor %}
							</div>
							{{ knp_pagination_render(reparations) }}
						{% else %}
							<p>Aucune réparation effectuée par cet utilisateur.</p>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
