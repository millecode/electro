{% extends 'base.html.twig' %}

{% block title %}
	Détails du Produit | Electro-Multifix
{% endblock %}

{% block body %}
	{% include 'admin/_menu.html.twig' %}

	<div class="container mt-5">
		<div class="row justify-content-center">
			<div class="col-md-8">
				<div class="card shadow-sm">
					<div class="card-header bg-primary text-white text-center">
						<h2>Détails du Produit</h2>
					</div>
					<div
						class="card-body">
						<!-- Affichage de l'image du produit -->
						{% if produit.image %}
							<div class="text-center mb-4">
								<img src="{{ asset('assets/images/produits/' ~ produit.image) }}" alt="{{ produit.titre }}" class="img-fluid rounded" style="max-height: 300px;">
							</div>

						{% endif %}

						<!-- Détails du produit -->
						<h4 class="text-primary text-center">{{ produit.titre }}</h4>
						<p class="text-muted text-center">{{ produit.categorie.categorie }}</p>
						<hr>
						<p>
							<strong>Description :</strong>
							{{ produit.description }}</p>
						<p>
							<strong>Prix :</strong>
							{{ produit.prix | number_format(0, '', ' ') }}
							DJF</p>
						<hr>

						<!-- Statistiques du produit -->
						<div class="row mt-4">
							{% if app.user.fonction == "ROLE_ADMIN" %}

								<div class="col-md-6">
									<div class="card border-success">
										<div class="card-body text-center">
											<h5 class="card-title text-success">Statistiques</h5>
											<p>
												<strong>Nombre total acheté :</strong>
												{{ nombreFoisAchete }}</p>
											<p>
												<strong>Stock restant :</strong>
												{{ stock }}</p>
										</div>
									</div>
								</div>
							{% endif %}
							<div class="col-md-6">
								<div class="card border-info">
									<div class="card-body text-center">
										<h5 class="card-title text-info">Actions</h5>
										<a href="{{ path('admin_modif_produit', {id: produit.id}) }}" class="btn btn-warning btn-sm">Modifier</a>
										<a href="{{ path('admin_supp_produit', {id: produit.id}) }}" class="btn btn-danger btn-sm" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce produit ?');">Supprimer</a>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="card-footer text-end">
						<a href="{{ path('admin_produits') }}" class="btn btn-secondary">Retour à la liste</a>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
