{% extends 'base.html.twig' %}

{% block title %}
	Liste des produits | Electro-Multifix
{% endblock %}

{% block body %}

	<!-- Page Header Section Start -->
	<div class="page-header parallaxie">
		<div class="container">
			<div class="row">
				<div
					class="col-md-12">
					<!-- Subpage Header Box Start -->
					<div class="page-header-box">
						<h1 class="text-anime">Liste des nos produits</h1>
					</div>
					<!-- Subpage Header Box End -->
				</div>
			</div>
		</div>
	</div>
	<!-- Page Header Section End -->


	<div class="container">
		<div class="row">
			<div class="col-12 col-md-2"></div>
			<div
				class="col-md-8">
				<!-- Formulaire de recherche avec un select -->
				<form method="get" action="{{ path('liste_categorie') }}" class="mt-3">
					<div
						class="row">
						<!-- Champ texte pour le titre -->
						<div class="col-md-4 mt-2">
							<input type="text" name="titre" class="form-control border border-dark" placeholder="Rechercher par titre" value="{{ titre }}">
						</div>

						<!-- Menu déroulant des catégories -->
						<div class="col-md-4 mt-2">
							<select name="categorie" class="form-select form-control border border-dark">
								<option value="">Toutes les catégories</option>
								{% for categorie in allCategories %}
									<option value="{{ categorie.id }}" {% if selectedCategorieId == categorie.id %} selected {% endif %}>
										{{ categorie.categorie }}
									</option>
								{% endfor %}
							</select>
						</div>

						<!-- Bouton de soumission -->
						<div class="col-md-4 mt-2">
							<button class="btn-default form-control" type="submit">Rechercher</button>
						</div>
					</div>
				</form>
			</div>
			<div class="col-md-2"></div>
		</div>
	</div>


	<!-- Blog Archive Page Start -->
	<div class="my-5">
		<div class="container">
			<div class="row">
				{% if produits is empty %}
					<div class="alert alert-info">
						Aucun produits trouvée.
					</div>
				{% else %}
					{% for produit in produits %}
						<div
							class="col-lg-3 col-md-6">
							<!-- Post Item Start -->
							<div
								class="post-item wow fadeInUp border border-dark rounded p-3" data-wow-delay="0.25s">
								<!-- Post Featured Image Start -->
								<div class="post-featured-image">
									<figure>
										<a href="{{path('voir_produit',{'id':produit.id,'slug':produit.slug})}}"><img src="{{asset('assets/images/produits/'~ produit.image)}}" alt="{{produit.titre}}"></a>
									</figure>

									<div class="post-read-more">
										<a href="{{path('voir_produit',{'id':produit.id,'slug':produit.slug})}}" class="btn-default">Voir le details</a>
									</div>
								</div>
								<!-- Post Featured Image End -->

								<hr
								class="bg-danger">
								<!-- Post Body Start -->
								<div class="post-body">
									<h3 class="text-center">
										<a href="{{path('voir_produit',{'id':produit.id,'slug':produit.slug})}}" class="text-primary">{{ produit.titre | slice(0, 20) ~ '...'}}</a>
									</h3>
									<div class="post-category text-center my-2">
										<ul>
											<li>
												<span class="badge bg-secondary p-2">{{ produit.categorie.categorie }}</span>
											</li>
										</ul>
									</div>
								</div>
								<!-- Post Body End -->
								<!-- Property Item Footer Start -->
								<div class="property-footer text-center">
									<p class="property-price text-dark">
										{{ produit.prix |number_format(0, '', ' ') }}
										FDJ
									</p>
									<a href="{{ path('cart_add', { id: produit.id }) }}" class="btn-default">
										<i class="fa-solid fa-cart-plus"></i>
										Ajouter au panier
									</a>
								</div>
								<!-- Property Item Footer Start -->
							</div>
							<!-- Post Item End -->
						</div>
					{% endfor %}
				{% endif %}

			</div>

			<div class="row">
				<div
					class="col-md-12 mt-5">
					<!-- Post Pagination Start -->
					<div class="wow fadeInUp" data-wow-delay="1.5s">
						<div class="d-flex justify-content-center">
							{{ knp_pagination_render(produits) }}
						</div>
					</div>
					<!-- Post Pagination End -->
				</div>
			</div>

		</div>
	</div>
	<!-- Blog Archive Page End -->
{% endblock %}
